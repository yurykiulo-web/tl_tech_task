
# Кейс 1: правила работы с Git

## Описание
Данный документ содержит правила работы с Git репозиторием применяемым на проекте "Кейс1". Данные правила обязательны к применению всеми участниками проекта и являются базой для работы с системой контроля версий. Любые улучшения касательно описанных ниже правил, которые способствуют улучшению, качества разработки обсуждаются всей командой и принимаются в случае одобрения большинством голосов и ТЛ.

## Роли
На проекте используются следующие роли
- **ТЛ** - техлид проекта
- **Д** - девелопер

## Основные ветки и их типы
- **main** - главная ветка репозитория, хранящая стабильные версии значимых релизов
- **release_X** - содержит конкретный релиз проекта 
- **develop** - основная ветка для разрабтки
- **feature/MVticketNumber-short_descr** - ветка содержащая код конкретного тикета, может содержать всю фичу либо её часть
- **bug/MVticketNumber-short_descr** - ветка содержащая код фикса конкретного бага, включая хотфиксы

## Виды прав доступа
На проекте существует 4 типа прав доступа
- **Администратор** - вид доступа позволяющий любые операции с любыми ветками, а также администрирование юзеров репозитория и его конфигурирование
- **Стандартный** - включает все необходимие для разработки проекта действия за исключением аппрува\мержа в ветки **release_X**  и **main**  и работы с этими ветками. Таже этот доступ подразумевает запрет на любые действия в **develop**, которые могут изменить принудительно его историю коммитов (например force, reset, amend и т.д.)


## Правила работы с ветками репозитория
Работа с репозиторием основывается на 'Trunk based development' модели, адаптированной для текущего проекта.
**Д**, начав работу над таском должен создать новую ветку, отбранчевав её от свежего **девелоп** бранча. Имя ветки должно соответствовать описанию из раздела **Основные ветки и их типы**. Закончив работу с таском, **Д** создаёт Пулл Реквест (**ПР**) и переключается на работу над следующим таском. Принципы работы с **ПР** и их формат будут описаны в других разделах и документах, которые можно найти в ветке **tasks** проекта **tl_tech_tasks** (Процесс ревью кода - отдельный документ не включенный в данный скоп). Получив все необходимые аппрувы, **Д** мержит свой код в **девелоп** с обязательной опцией **-no-ff**, если иного не оговорено в рамках тикета. По окончании мержа, **Д** удаляет свою ветку. Для слияния веток используем **rebase** команду

- **Д** имеет **Стандартный** доступ в праве делать любые операции с ветками, которые он создал.
- **ТЛ** имеет доступ уровня **Администратор** и может делегировать свои полномочия одному из членов команды на короткий период времени.


## Политика аппрувов ПРов
На проекте существуют 2 подкоманды разработчиков, для каждой из них предусмотрена собственная политика аппрувов
 - **Бэкенд комманда** - состоит из 1 **Д**, и аппрув ПРов этой команды осуществляется **ТЛ**, который имеет экспертизу в этом стеке
 - **Мобийл команда** - состоит из 2 **Д** и ппрув ПРов этой команды включает 1 аппрув от **Д** для обычных тасков и 2 аппрува (**Д** + **ТЛ**) для критичных тасков
Любые аппрувы и мержи в ветки **release_X** или **main** осуществляются исключительно **ТЛ**